(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f88ff9e"],{"520f":function(e,s,t){},"578a":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e._self._c;return s("div",{staticClass:"loginBody"},[s("div",{staticClass:"loginBackground"}),s("div",{staticClass:"loginDiv"},[s("div",{staticClass:"login-content"},[e._m(0),s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"100px",rules:e.rules}},[s("el-form-item",{attrs:{label:"用户账号",prop:"no"}},[s("el-input",{staticStyle:{width:"280px"},attrs:{"prefix-icon":"el-icon-user",type:"text",autocomplete:"off",size:"medium",placeholder:"请输入您的账号"},model:{value:e.loginForm.no,callback:function(s){e.$set(e.loginForm,"no",s)},expression:"loginForm.no"}})],1),s("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[s("el-input",{staticStyle:{width:"280px"},attrs:{"prefix-icon":"el-icon-lock",type:"password","show-password":"",autocomplete:"off",size:"medium",placeholder:"请输入您的密码"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.confirm.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),s("el-form-item",[s("el-button",{staticStyle:{width:"280px",height:"40px","font-size":"16px"},attrs:{type:"primary",disabled:e.confirm_disabled||e.requestProcessing},on:{click:e.confirm}},[s("i",{staticClass:"el-icon-right"}),e._v(" 登 录 ")])],1)],1)],1)])])},o=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"logo-container"},[s("i",{staticClass:"el-icon-s-home logo-icon"}),s("h1",{staticClass:"login-title"},[e._v("仓库管理系统")])])}],r={name:"Login",data(){return{confirm_disabled:!1,requestProcessing:!1,loginForm:{no:"",password:""},rules:{no:[{required:!0,message:"请输入用户账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},loginTimeout:null,TIMEOUT_DURATION:5e3,requestAborted:!1}},methods:{confirm(){this.confirm_disabled=!0,this.requestProcessing=!0,this.requestAborted=!1,this.$refs.loginForm.validate(e=>{e?(this.loginTimeout=setTimeout(()=>{this.requestProcessing=!1,this.confirm_disabled=!1,this.requestAborted=!0,this.$message.error("登录请求超时，请检查网络连接")},this.TIMEOUT_DURATION),this.$axios.post(this.$httpUrl+"/user/login",this.loginForm).then(e=>e.data).then(e=>{this.requestAborted||(clearTimeout(this.loginTimeout),200==e.code?(sessionStorage.setItem("CurUser",JSON.stringify(e.data.user)),sessionStorage.setItem("MenuData",JSON.stringify(e.data.menu)),this.$store.commit("setMenu",e.data.menu),this.$router.replace("/Index").catch(()=>{})):(this.requestProcessing=!1,this.confirm_disabled=!1,this.$message.error("用户名或密码错误，请重新输入")))}).catch(e=>{if(clearTimeout(this.loginTimeout),e.response){const s=e.response.status;400===s?this.$message.error("用户名或密码错误"):s>=500&&this.$message.error("服务器内部错误："+e.response.data.message)}else e.request?"ECONNABORTED"===e.code?this.$message.error("请求超时，请检查网络"):this.$message.error("网络连接异常"):this.$message.error("请求失败："+e.message);this.requestProcessing=!1,this.confirm_disabled=!1})):(this.confirm_disabled=!1,this.$message.error("表单验证失败，请检查输入内容"))})}},beforeDestroy(){this.loginTimeout&&clearTimeout(this.loginTimeout)}},n=r,a=(t("a6f1"),t("2877")),l=Object(a["a"])(n,i,o,!1,null,"799df4cc",null);s["default"]=l.exports},a6f1:function(e,s,t){"use strict";t("520f")}}]);
//# sourceMappingURL=chunk-1f88ff9e.486fffad.js.map